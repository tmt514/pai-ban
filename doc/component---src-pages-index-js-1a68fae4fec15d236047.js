(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=(a(142),a(161),a(148)),l=(a(163),a(33),a(7)),s=a.n(l),o=a(165),c=a.n(o),u=function(e){return["#FF0018","#FFC73E","#BFBFBF","#A267CA","#00CDFB","#00AD5B"][e]},m=function(e){var t=e.idx,a=String.fromCharCode(t+65);return r.a.createElement("span",null,a)},d=function(e){function t(){return e.call(this)||this}return s()(t,e),t.prototype.render=function(){var e=this.props.sol,t=this.props.idx,a=[0,0,0,0],n=[];if(e){for(var i=0;i<e.length;i++)for(var l=0;l<e[i].length;l++)e[i][l]===t&&a[l]++;for(i=0;i<a.length;i++)n.push(r.a.createElement("span",{key:i},a[i]," "))}return r.a.createElement("article",{className:"media"},r.a.createElement("figure",{className:"media-left"},r.a.createElement("p",{className:"image is-64x64"},r.a.createElement("img",{src:"https://bulma.io/images/placeholders/128x128.png"}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{style:{backgroundColor:u(t),textAlign:"center"}},r.a.createElement("strong",null,r.a.createElement(m,{idx:t}),".")),r.a.createElement("div",null,n))))},t}(n.Component),h=function(e){function t(){return e.call(this)||this}return s()(t,e),t.prototype.render=function(){var e,t=this.props.seed,a=this.props.sol,n=this.props.N,i=[];for(e=0;e<n;e++)i.push(r.a.createElement(d,{key:e,idx:e,seed:t,sol:a}));return r.a.createElement("div",null,i)},t}(n.Component),p=function(e){var t=e.year;return r.a.createElement("span",null,t," 年")},f=function(e){var t=e.month;return r.a.createElement("span",null,t+1," 月")},E=function(e){var t=e.day;return r.a.createElement("span",null,"(",["日","一","二","三","四","五","六"][t],")")},v=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e,t,a=this.props.year,n=this.props.month,i=this.props.numOfDays,l=new Date(a,n,1).getDay(),s=this.props.sol,o=[];for(e=1;e<=i;e++){var c=[];if(s&&s[e])for(t=0;t<s[e].length;t++)c.push(r.a.createElement("td",{key:t,style:{backgroundColor:u(s[e][t])}},r.a.createElement(m,{idx:s[e][t]})));o.push(r.a.createElement("tr",{key:e},r.a.createElement("td",{style:{textAlign:"center"}},e," ",r.a.createElement(E,{day:(l+e-1)%7})),c))}var d=r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"日"),r.a.createElement("th",null,"A區白班"),r.a.createElement("th",null,"A區晚班"),r.a.createElement("th",null,"C區白班"),r.a.createElement("th",null,"C區晚班"))),r.a.createElement("tbody",null,o));return r.a.createElement("div",null,d)},t}(n.Component),g=function(e){function t(){var t;t=e.call(this)||this;var a,n=new Date,r=(a=new Date(n.getFullYear(),n.getMonth()+1,1)).getFullYear(),i=a.getMonth(),l=new Date(r,i,0).getDate();return t.state={seed:0,N:6,year:r,month:i,numOfDays:l},t}s()(t,e);var a=t.prototype;return a.updateN=function(){var e=Object.assign({},this.state);e.N=parseInt(this.inputN.value),this.setState(e)},a.updateSeed=function(){var e=Object.assign({},this.state);e.seed=parseInt(this.inputSeed.value),this.setState(e)},a.changeSeed=function(){var e=Object.assign({},this.state);e.seed=parseInt(Math.floor(65536*Math.random())),e.isLoading=!0,this.setState(e),setTimeout(this.buildSolution.bind(this),10)},a.buildSolution=function(){var e=Object({},this.state);e.isLoading=!0,this.setState(e);setTimeout(function(){var e,t,a,n=new c.a(this.state.seed),r=this.state.numOfDays,i=this.state.N,l=[],s=[],o=[];for(e=0;e<i;e++)s.push([0,0,0,0]);var u=[];for(function e(t){if(4!=t.length)for(var a=0;a<i;a++){for(var n=0,r=0;r<t.length;r++)t[r]===a&&(n=1);0===n&&(t.push(a),e(t),t.pop())}else u.push(t.slice())}([]),e=1;e<u.length;e++)t=n.random_int()%(e+1),a=u[e],u[e]=u[t],u[t]=a;var m=function(e,t,a,n,r,i,l){if(l[0]===i[1]||l[0]===i[3]||l[2]===i[1]||l[2]===i[3])return!1;for(var s=0;s<4;s++)if(n[l[s]][s]+1>t/a+1)return!1;for(s=0;s<4;s++)if(n[l[s]][0]+n[l[s]][1]+n[l[s]][2]+n[l[s]][3]>4*t/a+1)return!1;for(s=0;s<4;s++){for(var o=0,c=Math.max(e.length-6,1);c<e.length;c++)o+=r[c][l[s]];if(6==o)return!1}return!0},d=function(e,t){for(var a=0;a<4;a++)e[t[a]][a]++},h=function(e,t){for(var a=0;a<4;a++)e[t[a]][a]--},p=0,f=0;!function e(t){if(l.push(t),o.push(function(e){for(var t=[],a=0;a<i;a++)t.push(0);for(a=0;a<4;a++)e[a]>=0&&(t[e[a]]=1);return t}(t)),(p+=1)>=2e5)return f=1,!0;if(l.length===r+1)return!0;for(var a=0;a<u.length;a++)if(m(l,r,i,s,o,t,u[a])){if(d(s,u[a]),e(u[a]))return!0;h(s,u[a])}return l.pop(),o.pop(),!1}([-1,-1,-1,-1]);var E=Object.assign({},this.state);f?(E.msg="失敗了，請選另一個亂數種子！",E.sol=void 0,E.isLoading=void 0):(E.msg=void 0,E.sol=l,E.isLoading=void 0),this.setState(E)}.bind(this),0)},a.render=function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"人數"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{ref:function(t){return e.inputN=t},className:"input",value:this.state.N,onChange:this.updateN.bind(this)})))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"field is-6"},r.a.createElement("label",{className:"label"},"亂數種子"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{ref:function(t){return e.inputSeed=t},className:"input",value:this.state.seed,onChange:this.updateSeed.bind(this)}))))),r.a.createElement("div",null,r.a.createElement("button",{className:"button is-primary "+(this.state.isLoading?"is-loading":""),onClick:this.buildSolution.bind(this)},"建立班表")," ",r.a.createElement("button",{className:"button is-info "+(this.state.isLoading?"is-loading":""),onClick:this.changeSeed.bind(this)},"換個種子"),this.state.msg&&r.a.createElement("span",{className:"is-warning"},this.state.msg))),r.a.createElement("div",null,"排班就是我"),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-quarter"},r.a.createElement(h,{ref:function(t){return e.peoplePanel=t},seed:this.state.seed,N:this.state.N,sol:this.state.sol})),r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},r.a.createElement(p,{year:this.state.year})," ",r.a.createElement(f,{month:this.state.month})),r.a.createElement(v,{year:this.state.year,month:this.state.month,numOfDays:this.state.numOfDays,sol:this.state.sol}))))},t}(n.Component),y=function(){return r.a.createElement("div",{className:"content"},r.a.createElement("ul",null,r.a.createElement("li",null,"加護病房兩區（A區和C區），白班（0700-1900）和夜班（1900-0700），總共六個人輪"),r.a.createElement("li",null,"星期一的個數盡量平均"),r.a.createElement("li",null,"不可以夜班連白班（會變成連續工作24小時）"),r.a.createElement("li",null,"盡量不跳區（像A白C白A白這種）"),r.a.createElement("li",null,"有的人會有一些要求，像是要某幾天不上班之類的"),r.a.createElement("li",null,"盡量不要卡一天或超過六天連上（會很累），班盡可能平均（每一種A區白夜班、C區白夜班）"),r.a.createElement("li",null,"就是會有人預約放假，一個人2-3天為限，盡量滿足")))};t.default=function(){return r.a.createElement(i.a,null,r.a.createElement("h1",null,"簡易排班程式"),r.a.createElement(y,null),r.a.createElement(g,null))}},142:function(e,t,a){"use strict";a.r(t),a.d(t,"graphql",function(){return p}),a.d(t,"StaticQueryContext",function(){return d}),a.d(t,"StaticQuery",function(){return h});var n=a(0),r=a.n(n),i=a(4),l=a.n(i),s=a(141),o=a.n(s);a.d(t,"Link",function(){return o.a}),a.d(t,"withPrefix",function(){return s.withPrefix}),a.d(t,"navigate",function(){return s.navigate}),a.d(t,"push",function(){return s.push}),a.d(t,"replace",function(){return s.replace}),a.d(t,"navigateTo",function(){return s.navigateTo});var c=a(143),u=a.n(c);a.d(t,"PageRenderer",function(){return u.a});var m=a(34);a.d(t,"parsePath",function(){return m.a});var d=r.a.createContext({}),h=function(e){return r.a.createElement(d.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function p(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}h.propTypes={data:l.a.object,query:l.a.string.isRequired,render:l.a.func,children:l.a.func}},143:function(e,t,a){var n;e.exports=(n=a(145))&&n.default||n},144:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter"}}}}},145:function(e,t,a){"use strict";a.r(t);a(33);var n=a(0),r=a.n(n),i=a(4),l=a.n(i),s=a(48),o=a(2),c=function(e){var t=e.location,a=o.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json))};c.propTypes={location:l.a.shape({pathname:l.a.string.isRequired}).isRequired},t.default=c},146:function(e,t,a){},148:function(e,t,a){"use strict";var n=a(144),r=a(0),i=a.n(r),l=a(4),s=a.n(l),o=a(149),c=a.n(o),u=a(142),m=function(e){var t=e.siteTitle;return i.a.createElement("div",{style:{background:"rebeccapurple",marginBottom:"1.45rem"}},i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},i.a.createElement("h1",{style:{margin:0}},i.a.createElement(u.Link,{to:"/",style:{color:"white",textDecoration:"none"}},t))))},d=(a(146),function(e){var t=e.children;return i.a.createElement(u.StaticQuery,{query:"755544856",render:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},i.a.createElement("html",{lang:"en"})),i.a.createElement(m,{siteTitle:e.site.siteMetadata.title}),i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))},data:n})});d.propTypes={children:s.a.node.isRequired};t.a=d}}]);
//# sourceMappingURL=component---src-pages-index-js-1a68fae4fec15d236047.js.map